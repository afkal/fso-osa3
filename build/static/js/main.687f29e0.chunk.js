(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var o=t(14),i=t.n(o),r=t(3),s=t(2),c=t(4),a=t.n(c),u="/api/persons",l={getAll:function(){var e={id:99999,name:"Fake Contact",number:"1234567"};return a.a.get(u).then((function(n){return n.data.concat(e)}))},create:function(e){return a.a.post(u,e)},update:function(e,n){return a.a.put("".concat(u,"/").concat(e),n)},remove:function(e){return a.a.delete("".concat(u,"/").concat(e))}},d=t(0),f=function(e){var n=e.id,t=e.name,o=e.number,i=e.setVisible,r=e.setNotification,s=e.persons;return Object(d.jsxs)("div",{children:[t," ",o," ",Object(d.jsx)("button",{onClick:function(){return function(e){var n=e.id,t=e.name,o=e.setVisible,i=e.setNotification,r=e.persons;window.confirm("Do you really want to remove "+t+"?")&&(console.log("remove item: "+n+" name: "+t),l.remove(n).then((function(e){console.log("removed"),o(r.filter((function(e){return e.id!==n}))),i("Removed "+t),setTimeout((function(){i(null)}),3e3)})).catch((function(e){i("Error: "+t+" does not exist on the server"),setTimeout((function(){i(null)}),3e3),console.log("fail")})))}({id:n,name:t,setVisible:i,setNotification:r,persons:s})},children:"remove"})]})},b=function(e){var n=e.persons,t=e.setVisible,o=e.setNotification;return console.log("calling Persons"),n.map((function(e){return Object(d.jsx)(f,{id:e.id,name:e.name,number:e.number,setVisible:t,setNotification:o,persons:n},e.name)}))},m=function(e){var n=e.persons,t=e.setPersons,o=e.name,i=e.setName,r=e.number,s=e.setNumber,c=e.setVisible,a=e.setNotification;return Object(d.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),console.log("handleFormSubmit"),n.map((function(e){return e.name})).includes(o)){console.log("persons",n);var i=n.filter((function(e){return e.name===o}));console.log("contact",i);var s=i[0].id,u=n.findIndex((function(e){return e.name===o}));if(console.log("index ",u),console.log("person ",n[u]),console.log("id: "+n[u].id),!window.confirm(o+" already exists, do you want to replace?"))return;console.log("change wanted");var d={name:o,number:r};l.update(s,d).then((function(e){t(n.map((function(n){return n.id!==s?n:e.data}))),c(n.map((function(n){return n.id!==s?n:e.data}))),console.log("updated database and view"),a("Updated "+e.data.name),setTimeout((function(){a(null)}),3e3)})).catch((function(e){a("Error: "+o+" does not exist on the server"),setTimeout((function(){a(null)}),3e3),console.log("fail")}))}else{var f={name:o,number:r};l.create(f).then((function(e){t(n.concat(e.data)),c(n.concat(e.data)),a("Added "+e.data.name),setTimeout((function(){a(null)}),3e3)})).catch((function(e){a("Error: operation failed"),setTimeout((function(){a(null)}),3e3),console.log("fail")}))}},children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{onChange:function(e){i(e.target.value)}}),"number: ",Object(d.jsx)("input",{onChange:function(e){s(e.target.value)}})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.persons,t=e.setVisible;return Object(d.jsxs)("div",{children:["filter shown with",Object(d.jsx)("input",{onChange:function(e){var o=n.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));t(o),console.log("Visible: ",o)}})]})},p=function(e){var n=e.message;if(null===n)return null;var t="green";n.includes("Error:")&&(t="red");var o={color:t,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(d.jsx)("div",{style:o,children:n})},h=function(){var e=Object(s.useState)([]),n=Object(r.a)(e,2),t=n[0],o=n[1],i=Object(s.useState)(""),c=Object(r.a)(i,2),a=c[0],u=c[1],f=Object(s.useState)(""),h=Object(r.a)(f,2),v=h[0],g=h[1],O=Object(s.useState)([]),x=Object(r.a)(O,2),w=x[0],N=x[1],V=Object(s.useState)(null),S=Object(r.a)(V,2),y=S[0],C=S[1];return Object(s.useEffect)((function(){console.log("using personService via Effect"),l.getAll().then((function(e){o(e),N(e)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(p,{message:y}),Object(d.jsx)(j,{persons:t,setVisible:N}),Object(d.jsx)("h3",{children:"Add a new"}),Object(d.jsx)(m,{persons:t,setPersons:o,name:a,setName:u,number:v,setNumber:g,setVisible:N,setNotification:C}),Object(d.jsx)("h3",{children:"Numbers"}),Object(d.jsx)(b,{persons:w,setVisible:N,setNotification:C})]})};i.a.render(Object(d.jsx)(h,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.687f29e0.chunk.js.map